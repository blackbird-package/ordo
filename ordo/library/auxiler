#!/bin/bash

##
## GLOBAL VARIABLE
PROGSIDS=1



##
## MESSAGE AND BANNER

function blackbird_banner() {
    /usr/bin/clear
    echo '----------------------------------------------------'
    echo ' BLACKBIRD SYSTEM FRAMEWORK'
    echo ' copyright@2025 Lektor Media Utama'
    echo '----------------------------------------------------'
}


function blackbird_scope_init() {
    blackbird_banner
    echo ' '$1
    echo '----------------------------------------------------'
}


function blackbird_scope_done() {
    PROGSIDS=1
    /usr/bin/sleep 2s
}


function blackbird_progress() {
    echo "        |"
    echo "  step ($PROGSIDS) $1"
    PROGSIDS=$(( $PROGSIDS + 1 ))
    /usr/bin/sleep 1s
}


function blackbird_warning() {
    echo "        |----> [ warning ] $1"
    /usr/bin/sleep 1s
}


function blackbird_info() {
    echo "        |----> [ info ] $1"
    /usr/bin/sleep 1s
}


function blackbird_error() {
    echo "        |----> [ error ] $1"
    /usr/bin/sleep 1s
    exit 1
}


function blackbird_done() {
    echo "        |----> [ done ]"
}


##
## MAIN FUNCTIONS

clear && echo 'load core library ...' && sleep 1

## load library 

LIBRARY=("sysinfo" "storage" "installs" "system")

for libmods in "${LIBRARY[@]}"; do

    if [[ -e "$ORDOPATH/ordo/library/$libmods" ]];then

        source "$ORDOPATH/ordo/library/$libmods"
    else
        blackbird_error "$libmods is missing or misconfigured"
    fi
done


## load sources 

SOURCES=("rebase" "making" "recover")

for libsrcs in "${SOURCES[@]}"; do

    if [[ -e "$ORDOPATH/ordo/library/$libsrcs" ]];then

        source "$ORDOPATH/ordo/library/$libsrcs"
    else
        blackbird_error "$libsrcs is missing or misconfigured"
    fi
done
